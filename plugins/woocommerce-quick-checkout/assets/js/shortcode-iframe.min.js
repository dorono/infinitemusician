!function(a){"use strict";function b(){d(),e(),setTimeout(function(){a("body.iframe").css({height:"auto"})},200),a(".wqc-toggle-shortcode-fields").on("click",function(){a(".wqc-shortcode-hidden-fields-wrap").slideToggle()}),h===!0&&(a(".wqc-edit-shortcode").show(),a(".wqc-shortcode-hidden-fields-wrap").show(),a("#wqc_location_lookup_fields").hide(),a("#wqc_submit").val("Edit Shortcode"),c(g))}function c(b){var c=f(b.shortcode_params,"id"),d=f(b.shortcode_params,"title"),e=f(b.shortcode_params,"widget_style"),g=f(b.shortcode_params,"align"),h=f(b.shortcode_params,"max_width"),i=(f(b.shortcode_params,"review_limit"),f(b.shortcode_params,"cache")),j=f(b.shortcode_params,"review_filter"),k=f(b.shortcode_params,"review_char_limit"),l=f(b.shortcode_params,"pre_content"),m=f(b.shortcode_params,"post_content"),n=f(b.shortcode_params,"hide_header"),o=f(b.shortcode_params,"hide_google_image"),p=f(b.shortcode_params,"hide_out_of_rating"),q=f(b.shortcode_params,"target_blank"),r=f(b.shortcode_params,"no_follow");return c?(a("#wqc_widget_place_id").val(c),d&&a("#wqc_widget_title").val(d),e&&a("#wqc_widget_theme").val(e),g&&a("#wqc_widget_alignment").val(g),h&&a("#wqc_widget_maxwidth").val(h),j&&a("#wqc_widget_review_filter").val(j),k&&a("#wqc_widget_review_char_limit").val(k),l&&a("#wqc_widget_pre_content").val(l),m&&a("#wqc_widget_post_content").val(m),i&&a("#wqc_widget_cache").val(i),"true"==n&&a("#wqc_widget_hide_header").prop("checked",!0),"true"==o&&a("#wqc_widget_hide_google_image").prop("checked",!0),"true"==p&&a("#wqc_widget_hide_out_of_rating").prop("checked",!0),"false"==r&&a("#wqc_widget_no_follow").prop("checked",!1),void("false"==q&&a("#wqc_widget_target_blank").prop("checked",!1))):(alert("There was no Place ID found for this shortcode. Please create a new one."),!1)}function d(){a(".tooltip-info").tipsy({fade:!0,html:!0,gravity:"n",delayOut:1e3,delayIn:500})}function e(){a("#wqc_settings").on("submit",function(b){b.preventDefault();var c=a(this),d=c.serializeArray(),e={};a.each(d,function(){""!=this.value&&(e[this.name]=this.value||"")});var f,g=a.map(e,function(a,b){return b+'="'+a+'"'}).join(" ");top.tinymce.activeEditor.windowManager.getParams();f="[quick_checkout ",f+=g,f+="]",top.tinyMCE.activeEditor.execCommand("mceInsertContent",0,f),top.tinymce.activeEditor.windowManager.close()})}function f(a,b){return b=new RegExp(b+'="([^"]+)"',"g").exec(a),b?window.decodeURIComponent(b[1]):""}var g="",h=!1;a(document).ready(function(){a(".wc-product-search").on("change",function(a){}),a("#wqc_cancel").on("click",function(a){top.tinymce.activeEditor.windowManager.close(),a.preventDefault()}),g=top.tinyMCE.activeEditor.windowManager.getParams(),"undefined"!==g.shortcode_params&&(h=!0),b()})}(jQuery);